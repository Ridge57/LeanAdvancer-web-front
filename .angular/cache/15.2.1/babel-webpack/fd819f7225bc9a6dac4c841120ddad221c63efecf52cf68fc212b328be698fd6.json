{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/services/irritant.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"primeng/table\";\nimport * as i5 from \"primeng/api\";\nimport * as i6 from \"../side-navigation/side-navigation.component\";\nimport * as i7 from \"../top-navigation/top-navigation.component\";\nfunction CategoriesComponent_ng_template_24_th_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelement(2, \"p-sortIcon\", 36);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const col_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"pSortableColumn\", col_r6.field);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", col_r6.header, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"field\", col_r6.field);\n  }\n}\nfunction CategoriesComponent_ng_template_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, CategoriesComponent_ng_template_24_th_1_Template, 3, 3, \"th\", 34);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const columns_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", columns_r4);\n  }\n}\nfunction CategoriesComponent_ng_template_25_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const col_r10 = ctx.$implicit;\n    const rowData_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", rowData_r7[col_r10.field], \" \");\n  }\n}\nfunction CategoriesComponent_ng_template_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 37);\n    i0.ɵɵlistener(\"click\", function CategoriesComponent_ng_template_25_Template_tr_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const rowData_r7 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.getSelectedCat(rowData_r7));\n    });\n    i0.ɵɵtemplate(1, CategoriesComponent_ng_template_25_td_1_Template, 2, 1, \"td\", 38);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const rowData_r7 = ctx.$implicit;\n    const columns_r8 = ctx.columns;\n    i0.ɵɵproperty(\"pSelectableRow\", rowData_r7);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", columns_r8);\n  }\n}\nfunction CategoriesComponent_div_45_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 39)(1, \"div\", 20)(2, \"div\", 21)(3, \"div\", 22)(4, \"h5\", 40);\n    i0.ɵɵtext(5, \"modifier le motif\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 24)(7, \"span\", 25);\n    i0.ɵɵtext(8, \"\\u00D7\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"div\", 26)(10, \"div\", 27)(11, \"label\");\n    i0.ɵɵtext(12, \"nom du motif\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"input\", 41);\n    i0.ɵɵlistener(\"input\", function CategoriesComponent_div_45_Template_input_input_13_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.saisie($event.target.value));\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"div\", 29)(15, \"button\", 42);\n    i0.ɵɵlistener(\"click\", function CategoriesComponent_div_45_Template_button_click_15_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.fermer());\n    });\n    i0.ɵɵtext(16, \"fermer\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function CategoriesComponent_div_45_Template_button_click_17_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.modifier());\n    });\n    i0.ɵɵtext(18, \"modifier\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(13);\n    i0.ɵɵpropertyInterpolate(\"value\", ctx_r2.selectedCat.nomCat);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", !ctx_r2.actionButtonIsVisible);\n  }\n}\nfunction CategoriesComponent_div_46_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 43)(1, \"div\", 44)(2, \"div\", 21)(3, \"div\", 22)(4, \"h5\", 45)(5, \"span\", 46);\n    i0.ɵɵelement(6, \"i\", 47);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"Demande de confirmation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 24)(9, \"span\", 25);\n    i0.ɵɵtext(10, \"\\u00D7\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"div\", 26);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 29)(14, \"button\", 48);\n    i0.ɵɵtext(15, \"Annuler\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 42);\n    i0.ɵɵlistener(\"click\", function CategoriesComponent_div_46_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.deleteCat());\n    });\n    i0.ɵɵtext(17, \"Oui, supprimer\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵtextInterpolate1(\" Confirmer la suppression du motif : \", ctx_r3.selectedCat.nomCat, \"? \");\n  }\n}\nexport let CategoriesComponent = /*#__PURE__*/(() => {\n  class CategoriesComponent {\n    constructor(irritantService, formBuilder) {\n      this.irritantService = irritantService;\n      this.formBuilder = formBuilder;\n    }\n    ngOnInit() {\n      this.getAllCategories();\n      this.initForm();\n      this.cols = [{\n        field: 'nomCat',\n        header: 'Motif Irritant'\n      }];\n    }\n    getAllCategories() {\n      this.irritantService.getCategories().subscribe(data => {\n        this.categories = data;\n      });\n    }\n    initForm() {\n      this.formCat = this.formBuilder.group({\n        idCat: '',\n        nomCat: ''\n      });\n    }\n    getSelectedCat(cat) {\n      this.selectedCat = cat;\n    }\n    saisie(val) {\n      if (val !== \"\" && val.replace(/\\s/g, '').length > 0) {\n        this.nouveauMotfif = val;\n        this.formCat.get('nomCat').setValue(val);\n        this.actionButtonIsVisible = true;\n      } else {\n        this.actionButtonIsVisible = false;\n      }\n    }\n    ajouter() {\n      this.irritantService.addCategorie(this.formCat.value).subscribe(() => {\n        this.formCat.reset();\n        this.nouveauMotfif = \"\";\n        document.location.reload();\n      });\n    }\n    modifier() {\n      this.formCat.get('idCat').setValue(this.selectedCat.idCat);\n      //this.formCat.get('nomCat').setValue(this.selectedCat.nomCat)\n      this.ajouter();\n    }\n    fermer() {\n      this.formCat.reset();\n      this.nouveauMotfif = \"\";\n    }\n    deleteCat() {\n      this.irritantService.deleteCat(this.selectedCat.idCat).subscribe(() => {\n        document.location.reload();\n      });\n    }\n    customSort(event) {\n      event.data.sort((data1, data2) => {\n        let value1 = data1[event.field];\n        let value2 = data2[event.field];\n        let result = null;\n        if (value1 == null && value2 != null) result = -1;else if (value1 != null && value2 == null) result = 1;else if (value1 == null && value2 == null) result = 0;else if (typeof value1 === 'string' && typeof value2 === 'string') result = value1.localeCompare(value2);else result = value1 < value2 ? -1 : value1 > value2 ? 1 : 0;\n        return event.order * result;\n      });\n    }\n  }\n  CategoriesComponent.ɵfac = function CategoriesComponent_Factory(t) {\n    return new (t || CategoriesComponent)(i0.ɵɵdirectiveInject(i1.IrritantService), i0.ɵɵdirectiveInject(i2.FormBuilder));\n  };\n  CategoriesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CategoriesComponent,\n    selectors: [[\"app-categories\"]],\n    decls: 47,\n    vars: 8,\n    consts: [[\"id\", \"wrapper\"], [\"id\", \"content-wrapper\", 1, \"d-flex\", \"flex-column\"], [\"id\", \"content \"], [1, \"container-fluid\"], [1, \"mb-4\"], [1, \"h3\", \"mb-0\", \"text-gray-800\"], [1, \"container\"], [1, \"row\", \"mb-4\", \"d-flex\", \"justify-content-around\", \"align-items-center\", 2, \"height\", \"80px\"], [1, \"card\", \"shadow\", \"col-sm-3\", \"card\", \"shadow\", \"px-0\", 2, \"height\", \"90%\"], [\"type\", \"button\", \"data-toggle\", \"modal\", \"data-target\", \"#ajoutModal\", 1, \"btn\", \"btn-success\", \"d-flex\", \"justify-content-around\", \"align-items-center\", 2, \"height\", \"100%\", \"font-size\", \"1.2em\"], [1, \"pi\", \"pi-plus-circle\", 2, \"font-size\", \"1.5em\"], [1, \"col-sm-3\", \"card\", \"shadow\", \"px-0\", 2, \"height\", \"90%\"], [\"type\", \"button\", \"data-toggle\", \"modal\", \"data-target\", \"#modifierModal\", 1, \"btn\", \"btn-warning\", \"d-flex\", \"justify-content-around\", \"align-items-center\", 2, \"height\", \"100%\", \"font-size\", \"1.2em\"], [1, \"pi\", \"pi-pencil\", 2, \"font-size\", \"1.5em\"], [\"type\", \"button\", \"data-toggle\", \"modal\", \"data-target\", \"#supprimerModal\", 1, \"btn\", \"btn-danger\", \"d-flex\", \"justify-content-around\", \"align-items-center\", 2, \"height\", \"100%\", \"font-size\", \"1.2em\"], [1, \"pi\", \"pi-times-circle\", 2, \"font-size\", \"1.5em\"], [\"selectionMode\", \"single\", \"currentPageReportTemplate\", \"Showing {first} to {last} of {totalRecords} entries\", 1, \"mb-4\", \"card\", \"shadow\", \"col-sm-5\", \"col-xs-10\", 3, \"columns\", \"value\", \"paginator\", \"rows\", \"showCurrentPageReport\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"id\", \"ajoutModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"ajoutModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"ajoutModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"close\"], [\"aria-hidden\", \"true\"], [1, \"modal-body\"], [1, \"form-group\"], [\"type\", \"text\", 1, \"form-control\", 3, \"input\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-warning\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"disabled\", \"click\"], [\"class\", \"modal fade\", \"id\", \"modifierModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"modifierModalLabel\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [\"class\", \"modal fade\", \"id\", \"supprimerModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"supprimerModalLabel\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [3, \"pSortableColumn\", 4, \"ngFor\", \"ngForOf\"], [3, \"pSortableColumn\"], [\"ariaLabel\", \"Activate to sort\", \"ariaLabelDesc\", \"Activate to sort in descending order\", \"ariaLabelAsc\", \"Activate to sort in ascending order\", 3, \"field\"], [3, \"pSelectableRow\", \"click\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"modifierModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"modifierModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"id\", \"modifierModalLabel\", 1, \"modal-title\"], [\"type\", \"text\", 1, \"form-control\", 3, \"value\", \"input\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [\"id\", \"supprimerModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"supprimerModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"role\", \"document\", 1, \"modal-dialog\"], [\"id\", \"supprimerModalLabel\", 1, \"modal-title\", \"d-flex\", \"justify-content-around\", \"align-items-center\"], [2, \"color\", \"#df4759\"], [1, \"fas\", \"fa-exclamation-circle\", \"mx-2\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-warning\"]],\n    template: function CategoriesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"app-side-navigation\");\n        i0.ɵɵelementStart(2, \"div\", 1)(3, \"div\", 2);\n        i0.ɵɵelement(4, \"app-top-navigation\");\n        i0.ɵɵelementStart(5, \"div\", 3)(6, \"div\", 4)(7, \"h3\", 5);\n        i0.ɵɵtext(8, \"Gestion des motifs des irritants (cat\\u00E9gories)\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 6)(10, \"div\", 7)(11, \"div\", 8)(12, \"button\", 9);\n        i0.ɵɵelement(13, \"i\", 10);\n        i0.ɵɵtext(14, \" ajouter \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"div\", 11)(16, \"button\", 12);\n        i0.ɵɵelement(17, \"i\", 13);\n        i0.ɵɵtext(18, \" modifier \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"div\", 11)(20, \"button\", 14);\n        i0.ɵɵelement(21, \"i\", 15);\n        i0.ɵɵtext(22, \" supprimer \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(23, \"p-table\", 16);\n        i0.ɵɵtemplate(24, CategoriesComponent_ng_template_24_Template, 2, 1, \"ng-template\", 17);\n        i0.ɵɵtemplate(25, CategoriesComponent_ng_template_25_Template, 2, 2, \"ng-template\", 18);\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(26, \"div\", 19)(27, \"div\", 20)(28, \"div\", 21)(29, \"div\", 22)(30, \"h5\", 23);\n        i0.ɵɵtext(31, \"ajouter un nouveau motif\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"button\", 24)(33, \"span\", 25);\n        i0.ɵɵtext(34, \"\\u00D7\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(35, \"div\", 26)(36, \"div\", 27)(37, \"label\");\n        i0.ɵɵtext(38, \"nom du motif\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"input\", 28);\n        i0.ɵɵlistener(\"input\", function CategoriesComponent_Template_input_input_39_listener($event) {\n          return ctx.saisie($event.target.value);\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(40, \"div\", 29)(41, \"button\", 30);\n        i0.ɵɵlistener(\"click\", function CategoriesComponent_Template_button_click_41_listener() {\n          return ctx.fermer();\n        });\n        i0.ɵɵtext(42, \"fermer\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"button\", 31);\n        i0.ɵɵlistener(\"click\", function CategoriesComponent_Template_button_click_43_listener() {\n          return ctx.ajouter();\n        });\n        i0.ɵɵtext(44, \"ajouter\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵtemplate(45, CategoriesComponent_div_45_Template, 19, 2, \"div\", 32);\n        i0.ɵɵtemplate(46, CategoriesComponent_div_46_Template, 18, 1, \"div\", 33);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(23);\n        i0.ɵɵproperty(\"columns\", ctx.cols)(\"value\", ctx.categories)(\"paginator\", true)(\"rows\", 10)(\"showCurrentPageReport\", true);\n        i0.ɵɵadvance(20);\n        i0.ɵɵproperty(\"disabled\", !ctx.actionButtonIsVisible);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedCat);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedCat);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.Table, i5.PrimeTemplate, i4.SortableColumn, i4.SelectableRow, i4.SortIcon, i6.SideNavigationComponent, i7.TopNavigationComponent]\n  });\n  return CategoriesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}